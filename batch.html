<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>My Batch - Sunrise Education Centre</title>
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="stylesheet" href="https://fonts.googleapis.com/css2?family=Inter:wght@400;700&display=swap">
    <link rel="stylesheet" href="style.css" />
    <link rel="stylesheet" href="floating-navbar.css" />
    <style>
      /* Modern Company-Style Glassmorphic Theme */
      body { 
        background: linear-gradient(135deg, #0f1117 0%, #161a25 50%, #1a1f2e 100%);
        position: relative;
      }
      
      body::before {
        content: '';
        position: fixed;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: 
          radial-gradient(800px 600px at 20% 20%, rgba(106, 130, 251, 0.15) 0%, transparent 50%),
          radial-gradient(600px 400px at 80% 80%, rgba(252, 92, 125, 0.1) 0%, transparent 50%);
        pointer-events: none;
        z-index: -1;
      }
      
      .black-glass { 
        background: rgba(5, 6, 10, 0.85);
        border: 1px solid rgba(255, 255, 255, 0.15);
        box-shadow: 
          0 20px 60px rgba(0, 0, 0, 0.8),
          0 8px 32px rgba(106, 130, 251, 0.1),
          inset 0 1px 0 rgba(255, 255, 255, 0.1);
        backdrop-filter: blur(24px) saturate(120%);
        -webkit-backdrop-filter: blur(24px) saturate(120%);
        color: #fff;
        border-radius: 20px;
      }
      
      .batch-grid {
        display: grid;
        grid-template-columns: repeat(auto-fit, minmax(280px, 1fr));
        gap: 1.5rem;
        margin-top: 1.5rem;
      }
      
      .batch-card {
        border: 1px solid rgba(255,255,255,0.12);
        border-radius: 20px;
        overflow: hidden;
        background: rgba(10, 12, 18, 0.8);
        color: #fff;
        box-shadow: 
          0 20px 60px rgba(0,0,0,0.6),
          0 8px 32px rgba(106, 130, 251, 0.1),
          inset 0 1px 0 rgba(255, 255, 255, 0.08);
        transition: all 0.4s cubic-bezier(0.4, 0, 0.2, 1);
        position: relative;
      }
      
      .batch-card::before {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        height: 2px;
        background: linear-gradient(90deg, #6a82fb, #fc5c7d, #6a82fb);
        background-size: 200% 100%;
        animation: shimmer 3s ease-in-out infinite;
        opacity: 0;
        transition: opacity 0.3s ease;
      }
      
      @keyframes shimmer {
        0%, 100% { background-position: 0% 50%; }
        50% { background-position: 100% 50%; }
      }
      
      .batch-card:hover { 
        transform: translateY(-8px) scale(1.02);
        box-shadow: 
          0 32px 80px rgba(0,0,0,0.8),
          0 16px 48px rgba(106, 130, 251, 0.2);
        border-color: rgba(255,255,255,0.2);
      }
      
      .batch-card:hover::before {
        opacity: 1;
      }
      
      .batch-image { 
        width: 100%;
        height: 180px;
        background: linear-gradient(135deg, rgba(106, 130, 251, 0.1), rgba(252, 92, 125, 0.1));
        display: flex;
        align-items: center;
        justify-content: center;
        overflow: hidden;
        position: relative;
      }
      
      .batch-image::after {
        content: '';
        position: absolute;
        top: 0;
        left: 0;
        right: 0;
        bottom: 0;
        background: linear-gradient(180deg, transparent 0%, rgba(0,0,0,0.3) 100%);
        pointer-events: none;
      }
      
      .batch-image img { 
        width: 100%;
        height: 100%;
        object-fit: cover;
        transition: transform 0.4s ease;
      }
      
      .batch-card:hover .batch-image img {
        transform: scale(1.05);
      }
      
      .batch-info {
        padding: 1.5rem;
        position: relative;
      }
      
      .batch-info h3 {
        margin: 0 0 1rem 0;
        font-size: 1.25rem;
        color: #8fa3ff;
        font-weight: 700;
        letter-spacing: -0.025em;
      }
      
      .batch-meta { 
        display: grid; 
        grid-template-columns: 1fr 1fr; 
        gap: 0.75rem 1rem; 
        font-size: 0.9rem; 
        color: rgba(255,255,255,0.8);
        margin-bottom: 1.5rem;
        line-height: 1.4;
      }
      
      .batch-meta div {
        display: flex;
        flex-direction: column;
        gap: 0.25rem;
      }
      
      .batch-meta strong {
        color: rgba(255,255,255,0.9);
        font-weight: 600;
        font-size: 0.8rem;
        text-transform: uppercase;
        letter-spacing: 0.05em;
      }
      
      .batch-actions { 
        display: flex; 
        gap: 0.75rem; 
        flex-wrap: wrap; 
      }
      
      .batch-actions .btn {
        padding: 0.75rem 1.25rem;
        border-radius: 12px;
        font-weight: 600;
        font-size: 0.9rem;
        transition: all 0.3s ease;
        border: 1px solid rgba(255,255,255,0.15);
        background: rgba(255,255,255,0.08);
        color: #fff;
        cursor: pointer;
      }
      
      .batch-actions .btn:hover {
        background: rgba(255,255,255,0.15);
        border-color: rgba(255,255,255,0.25);
        transform: translateY(-2px);
      }
      
      .batch-actions .btn-primary {
        background: linear-gradient(135deg, #6a82fb 0%, #5a6fd8 100%);
        border-color: #6a82fb;
      }
      
      .batch-actions .btn-primary:hover {
        background: linear-gradient(135deg, #5a6fd8 0%, #4a5fc7 100%);
        box-shadow: 0 8px 24px rgba(106, 130, 251, 0.3);
      }
      
      /* Enhanced Tabs styling */
      .tabs { 
        display: flex; 
        gap: 0.75rem; 
        flex-wrap: wrap;
        margin-bottom: 1rem;
      }
      
      .tab-btn {
        padding: 0.75rem 1.5rem;
        border: 1px solid rgba(255,255,255,0.15);
        border-radius: 12px;
        background: rgba(255,255,255,0.08);
        color: #fff;
        cursor: pointer;
        transition: all 0.3s ease;
        font-weight: 600;
        font-size: 0.9rem;
        position: relative;
        overflow: hidden;
      }
      
      .tab-btn::before {
        content: '';
        position: absolute;
        top: 0;
        left: -100%;
        width: 100%;
        height: 100%;
        background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
        transition: left 0.5s ease;
      }
      
      .tab-btn:hover::before {
        left: 100%;
      }
      
      .tab-btn:hover { 
        background: rgba(255,255,255,0.15); 
        border-color: rgba(255,255,255,0.25);
        transform: translateY(-2px);
      }
      
      .tab-btn.active { 
        background: linear-gradient(135deg, #6a82fb 0%, #5a6fd8 100%);
        color: #fff; 
        border-color: #6a82fb;
        box-shadow: 0 8px 24px rgba(106, 130, 251, 0.3);
      }
      
      /* Enhanced Card polish */
      .card.animated-card { 
        border-radius: 20px; 
        box-shadow: 0 20px 60px rgba(0,0,0,0.8);
        padding: 2rem;
      }
      
      .card.animated-card h2 {
        font-size: 1.75rem;
        font-weight: 700;
        color: #8fa3ff;
        margin-bottom: 1rem;
        letter-spacing: -0.025em;
      }
      
      /* Responsive improvements */
      @media (max-width: 768px) {
        .batch-grid {
          grid-template-columns: 1fr;
          gap: 1rem;
        }
        
        .batch-card {
          margin-bottom: 1rem;
        }
        
        .tabs {
          justify-content: center;
        }
        
        .card.animated-card {
          padding: 1.5rem;
        }
      }
    </style>
  </head>
  <body>
    <!-- Floating Navbar -->
    <nav class="floating-navbar black-glass">
        <button class="hamburger" aria-label="Menu" aria-expanded="false">
            <span class="bar"></span>
            <span class="bar"></span>
            <span class="bar"></span>
        </button>
        <ul class="nav-links">
            <li><a href="/">Home</a></li>
            
            <!-- Direct Page Links -->
            <li><a href="/online-class">Live Classes</a></li>
            <li><a href="/batch">Batches</a></li>
            <li><a href="/study-resources">Study Resources</a></li>
            <li><a href="/forum">Forum</a></li>
            <li><a href="/admission">Admission</a></li>
            
            <!-- User Dropdown -->
            {% if username %}
            <li class="profile-dropdown">
                <a href="#" id="profileLink">{{ username }} â–¾</a>
                <div class="profile-dropdown-menu" id="profileDropdown">
                    <a href="/profile" class="dropdown-item">My Profile</a>
                    <a href="/notifications" class="dropdown-item">Notifications</a>
                    <a href="/logout" class="dropdown-item">Logout</a>
                </div>
            </li>
            {% else %}
            <li><a href="/auth" class="btn-primary">Login</a></li>
            {% endif %}
            
            <!-- Search Button -->
            <li><button class="search-btn" onclick="openSearch()">Search</button></li>
            
            <!-- Notification Button -->
            <li style="position:relative;">
                <button id="notifBell" style="background:none; border:none; cursor:pointer; position:relative; color:#fff;">ðŸ””
                    <span id="notificationCount" style="position:absolute;top:0;right:0;width:18px;height:18px;background:#fc5c7d;border-radius:50%;color:white;font-size:10px;font-weight:bold;display:none;align-items:center;justify-content:center;">0</span>
                </button>
                <div id="notifDropdown" style="display:none;">
                    <strong style="color:#6a82fb;">Notifications</strong>
                    <ul style="list-style:none; padding:0; margin:0;"></ul>
                </div>
            </li>
            
            <!-- Theme Toggle Button -->
            <li>
                <button id="darkModeToggle" class="theme-toggle-btn" title="Toggle Dark Mode">
                    ðŸŒ™
                </button>
            </li>
        </ul>
    </nav>

    <main class="container main-content">
      {% if is_logged_in %}
      <section class="card animated-card black-glass" style="padding: 1.2rem 1rem;">
        <div style="display:flex; gap:0.6rem; align-items:center; justify-content:space-between; flex-wrap:wrap;">
          <h2 style="margin:0;">My Batches</h2>
          <div style="display:flex; gap:0.4rem;">
            <button class="tab-btn active" data-filter="paid">Paid</button>
            <button class="tab-btn" data-filter="free">Free</button>
          </div>
        </div>
        <div id="paid-section" class="batch-grid" style="margin-top:0.8rem;">
          {% if paid_cards and paid_cards|length > 0 %}
            {% for card in paid_cards %}
            <div class="batch-card black-glass">
              <div class="batch-image">
                <img src="{{ card.image }}" alt="{{ card.batch_name }}" />
              </div>
              <div class="batch-info">
                <h3>{{ card.batch_name }}</h3>
                <div class="batch-meta">
                  <div><strong>Class</strong>: {{ card.class_name }}</div>
                  <div><strong>ID</strong>: {{ card.class_id }}</div>
                  <div><strong>Start</strong>: {{ card.start_date }}</div>
                  <div><strong>End</strong>: {{ card.end_date }}</div>
                </div>
                <div class="batch-actions">
                  {% if user_paid_status == 'paid' %}
                  <a class="btn btn-primary" href="/batch/{{ card.class_id }}">Explore</a>
                  {% else %}
                  <a class="btn btn-primary" href="/admission">Buy Now</a>
                  {% endif %}
                </div>
              </div>
            </div>
            {% endfor %}
          {% else %}
            <div style="color:#6b7280;">No paid batches available.</div>
          {% endif %}
        </div>
        <div id="free-section" class="batch-grid" style="display:none; margin-top:0.8rem;">
          {% if free_cards and free_cards|length > 0 %}
            {% for card in free_cards %}
            <div class="batch-card black-glass">
              <div class="batch-image">
                <img src="{{ card.image }}" alt="{{ card.batch_name }}" />
              </div>
              <div class="batch-info">
                <h3>{{ card.batch_name }}</h3>
                <div class="batch-meta">
                  <div><strong>Class</strong>: {{ card.class_name }}</div>
                  <div><strong>ID</strong>: {{ card.class_id }}</div>
                  <div><strong>Start</strong>: {{ card.start_date }}</div>
                  <div><strong>End</strong>: {{ card.end_date }}</div>
                </div>
                <div class="batch-actions">
                  <a class="btn btn-secondary" href="/batch/{{ card.class_id }}">Explore</a>
                </div>
              </div>
            </div>
            {% endfor %}
          {% else %}
            <div style="color:#6b7280;">No free batches available.</div>
          {% endif %}
        </div>
      </section>
      {% else %}
      <section class="card animated-card black-glass" style="padding: 1.2rem 1rem;">
        <h2 style="margin:0 0 0.8rem 0;">All Batches</h2>
        <div style="display:flex; flex-direction:column; gap:0.8rem;">
          {% for card in all_cards %}
          <div class="batch-card" style="display:flex; gap:0.8rem;">
            <div class="batch-image" style="flex:0 0 180px; height:120px;">
              <img src="{{ card.image }}" alt="{{ card.batch_name }}" />
            </div>
            <div class="batch-info" style="flex:1;">
              <h3 style="margin-top:0;">{{ card.batch_name }}</h3>
              <div class="batch-meta" style="grid-template-columns:repeat(4, auto); gap:0.8rem;">
                <div><strong>Class</strong>: {{ card.class_name }}</div>
                <div><strong>ID</strong>: {{ card.class_id }}</div>
                <div><strong>Start</strong>: {{ card.start_date }}</div>
                <div><strong>End</strong>: {{ card.end_date }}</div>
              </div>
              <div class="batch-actions">
                <a class="btn btn-primary" href="/admission">Buy Now</a>
              </div>
            </div>
          </div>
          {% endfor %}
        </div>
      </section>
      {% endif %}
      {% if is_logged_in %}
      <section class="card animated-card black-glass" style="padding: 1.2rem 1rem;">
        <h1 style="margin: 0.2rem 0 0.8rem 0;">My Batch</h1>
        <p style="margin: 0; color: #6b7280;">Welcome{% if username %}, {{ username }}{% endif %}. Your class: <strong>{{ role }}</strong> (ID: {{ class_id }})</p>
      </section>
      {% endif %}

      <section class="card animated-card black-glass" style="padding: 1.2rem 1rem;">
        <h2 style="margin-top:0;">Batch Links</h2>
        <ul style="list-style:none; padding:0; margin:0; display:flex; gap:0.6rem; flex-wrap:wrap;">
          <li><a class="btn btn-primary" href="/online-class">Join Live Class</a></li>
          <li><a class="btn btn-secondary" href="/study-resources">Study Resources</a></li>
          <li><a class="btn btn-secondary" href="/forum">Forum</a></li>
          <li><a class="btn btn-secondary" href="/profile">Profile</a></li>
        </ul>
      </section>

      <section class="card animated-card" style="padding: 1.2rem 1rem;">
        <h2 style="margin-top:0;">Announcements</h2>
        <div id="batchAnnouncements" style="color:#6b7280;">No announcements yet.</div>
      </section>
    </main>

    <script>
      // Search functionality
      function openSearch() {
          const searchTerm = prompt("Enter your search term:");
          if (searchTerm) {
              // Search through batch cards
              const batchCards = document.querySelectorAll('.batch-card');
              let found = false;
              
              batchCards.forEach(card => {
                  const title = card.querySelector('h3').textContent.toLowerCase();
                  const searchLower = searchTerm.toLowerCase();
                  
                  if (title.includes(searchLower)) {
                      card.style.display = 'block';
                      card.style.border = '2px solid #0066cc';
                      found = true;
                  } else {
                      card.style.display = 'none';
                  }
              });
              
              if (!found) {
                  alert('No batches found matching your search term.');
              }
          }
      }

      // Toggle between paid and free sections for logged-in users
      document.addEventListener('DOMContentLoaded', function() {
        const filterButtons = document.querySelectorAll('.tab-btn[data-filter]');
        const paidSection = document.getElementById('paid-section');
        const freeSection = document.getElementById('free-section');
        if (filterButtons.length && paidSection && freeSection) {
          filterButtons.forEach(btn => {
            btn.addEventListener('click', () => {
              filterButtons.forEach(b => b.classList.remove('active'));
              btn.classList.add('active');
              const filter = btn.getAttribute('data-filter');
              if (filter === 'paid') {
                paidSection.style.display = '';
                freeSection.style.display = 'none';
              } else {
                paidSection.style.display = 'none';
                freeSection.style.display = '';
              }
            });
          });
        }
      });
    </script>
    <script src="script.js"></script>
    
    <!-- Footer -->
    <footer class="footer">
      <div class="container footer-content">
        <div class="footer-social">
          <a href="https://www.instagram.com/sunrise_education_centre?igsh=OGc5enlsanE0eWJ2" target="_blank">Instagram</a>
          <a href="https://www.youtube.com/@MohitNariyani" target="_blank">YouTube</a>
        </div>
        <div class="footer-links">
          <a href="#">Privacy Policy</a>
          <a href="#">Contact Us</a>
        </div>
        <div class="footer-copy">&copy; 2024 Sunrise Education Centre</div>
      </div>
    </footer>
  </body>
  <script src="attached_assets/theme.js"></script>
</html>

