<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1" />
    <title>Live Classes - Sunrise Educational Centre</title>
    <link rel="icon" type="image/png" href="/favicon.ico">
    <link rel="apple-touch-icon" href="/apple-touch-icon.png">
    <link rel="stylesheet" href="style.css">
    <link rel="stylesheet" href="floating-navbar.css">
    <link rel="stylesheet" href="uiverse-components.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.4.0/css/all.min.css">
    <link rel="stylesheet" href="enhanced-aesthetic.css">
    <link rel="stylesheet" href="modern-components.css">
    <link rel="stylesheet" href="modern-navbar.css">
    <link rel="preconnect" href="https://fonts.googleapis.com">
    <link rel="preconnect" href="https://fonts.gstatic.com" crossorigin>
    <link href="https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700;800;900&display=swap" rel="stylesheet">
    
    <style>
        /* Modern Navbar Styles */
        .navbar-modern {
            position: fixed;
            top: 2rem;
            left: 50%;
            transform: translateX(-50%);
            z-index: 1000;
            background: rgba(5, 6, 10, 0.85);
            border: 1px solid rgba(255, 255, 255, 0.22);
            border-radius: 50px;
            padding: 0.75rem 1.5rem;
            backdrop-filter: blur(20px) saturate(120%);
            -webkit-backdrop-filter: blur(20px) saturate(120%);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            transition: all 0.3s ease;
        }

        .navbar-container {
            display: flex;
            align-items: center;
            justify-content: space-between;
            gap: 2rem;
            max-width: 1200px;
            width: 100%;
        }

        .navbar-brand {
            display: flex;
            align-items: center;
            gap: 0.5rem;
        }

        .brand-link {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            text-decoration: none;
            color: white;
            font-weight: 700;
            font-size: 1.2rem;
        }

        .brand-icon {
            font-size: 1.5rem;
        }

        .navbar-toggle {
            display: none;
            flex-direction: column;
            background: none;
            border: none;
            cursor: pointer;
            padding: 0.5rem;
        }

        .toggle-bar {
            width: 25px;
            height: 3px;
            background: white;
            margin: 3px 0;
            transition: 0.3s;
            border-radius: 2px;
        }

        .navbar-menu {
            display: flex;
            align-items: center;
            gap: 2rem;
        }

        .navbar-nav {
            display: flex;
            align-items: center;
            gap: 1.5rem;
        }

        .nav-link {
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            font-weight: 500;
            padding: 0.5rem 1rem;
            border-radius: 25px;
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .nav-link::before {
            content: '';
            position: absolute;
            top: 0;
            left: -100%;
            width: 100%;
            height: 100%;
            background: linear-gradient(90deg, transparent, rgba(255,255,255,0.1), transparent);
            transition: left 0.6s ease;
        }

        .nav-link:hover::before {
            left: 100%;
        }

        .nav-link:hover,
        .nav-link.active {
            color: white;
            background: rgba(255, 255, 255, 0.1);
            transform: translateY(-2px);
        }

        .navbar-actions {
            display: flex;
            align-items: center;
            gap: 1rem;
        }

        .user-menu {
            position: relative;
        }

        .user-button {
            display: flex;
            align-items: center;
            gap: 0.5rem;
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 25px;
            padding: 0.5rem 1rem;
            color: white;
            cursor: pointer;
            transition: all 0.3s ease;
        }

        .user-button:hover {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .user-avatar {
            width: 30px;
            height: 30px;
            border-radius: 50%;
            background: linear-gradient(135deg, #6a82fb 0%, #fc5c7d 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            font-weight: 700;
            font-size: 0.9rem;
        }

        .user-dropdown {
            position: absolute;
            top: 100%;
            right: 0;
            margin-top: 0.5rem;
            background: rgba(5, 6, 10, 0.95);
            border: 1px solid rgba(255, 255, 255, 0.22);
            border-radius: 12px;
            padding: 0.5rem;
            min-width: 180px;
            backdrop-filter: blur(20px);
            box-shadow: 0 8px 32px rgba(0, 0, 0, 0.3);
            opacity: 0;
            visibility: hidden;
            transform: translateY(-10px);
            transition: all 0.3s ease;
        }

        .user-dropdown.active {
            opacity: 1;
            visibility: visible;
            transform: translateY(0);
        }

        .dropdown-link {
            display: block;
            color: rgba(255, 255, 255, 0.8);
            text-decoration: none;
            padding: 0.75rem 1rem;
            border-radius: 8px;
            transition: all 0.3s ease;
        }

        .dropdown-link:hover {
            color: white;
            background: rgba(255, 255, 255, 0.1);
        }

        /* Mobile Navbar Styles */
        @media (max-width: 768px) {
            .navbar-modern {
                top: 1rem;
                left: 1rem;
                right: 1rem;
                transform: none;
                padding: 1rem;
            }

            .navbar-container {
                gap: 1rem;
            }

            .navbar-toggle {
                display: flex;
            }

            .navbar-menu {
                position: absolute;
                top: 100%;
                left: 0;
                right: 0;
                margin-top: 1rem;
                background: rgba(5, 6, 10, 0.95);
                border: 1px solid rgba(255, 255, 255, 0.22);
                border-radius: 20px;
                padding: 1.5rem;
                flex-direction: column;
                gap: 1rem;
                opacity: 0;
                visibility: hidden;
                transform: translateY(-20px);
                transition: all 0.3s ease;
            }

            .navbar-menu.active {
                opacity: 1;
                visibility: visible;
                transform: translateY(0);
            }

            .navbar-nav {
                flex-direction: column;
                gap: 0.5rem;
                width: 100%;
            }

            .nav-link {
                width: 100%;
                text-align: center;
                padding: 1rem;
            }

            .navbar-actions {
                width: 100%;
                justify-content: center;
                flex-wrap: wrap;
            }
        }

        /* Online Class Specific Styles */
        .online-class-page {
            min-height: 100vh;
            background: linear-gradient(135deg, #0f0f23 0%, #1a1a2e 25%, #16213e 50%, #0f3460 75%, #533483 100%);
            background-size: 400% 400%;
            animation: gradientShift 15s ease infinite;
            font-family: 'Inter', sans-serif;
            color: white;
            overflow-x: hidden;
        }

        .online-class-container {
            max-width: 1600px;
            margin: 0 auto;
            padding: 0 2rem;
            position: relative;
            z-index: 10;
        }

        .online-class-hero {
            padding: 8rem 0 4rem 0;
            text-align: center;
            position: relative;
            z-index: 20;
        }

        .online-class-hero-content {
            max-width: 1000px;
            margin: 0 auto;
        }

        .online-class-logo {
            width: 120px;
            height: 120px;
            border-radius: 30px;
            background: linear-gradient(135deg, #6a82fb 0%, #fc5c7d 50%, #ff6b35 100%);
            display: flex;
            align-items: center;
            justify-content: center;
            margin: 0 auto 2rem;
            font-size: 3rem;
            animation: logoFloat 3s ease-in-out infinite;
            box-shadow: 0 20px 40px rgba(0, 0, 0, 0.3), 0 0 40px rgba(106,130,251,0.3);
            border: 2px solid rgba(255, 255, 255, 0.2);
        }

        .online-class-title {
            font-size: clamp(2.5rem, 6vw, 4rem);
            font-weight: 800;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #fff 0%, #e0e7ff 50%, #c7d2fe 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
            text-shadow: 0 4px 8px rgba(0,0,0,0.3);
        }

        .online-class-subtitle {
            font-size: clamp(1.1rem, 2.5vw, 1.4rem);
            color: rgba(255,255,255,0.9);
            margin-bottom: 2rem;
            line-height: 1.6;
        }

        .av-test-section {
            background: rgba(5, 6, 10, 0.72);
            border: 1px solid rgba(255, 255, 255, 0.22);
            border-radius: 20px;
            padding: 2rem;
            margin: 2rem auto;
            max-width: 600px;
            backdrop-filter: blur(18px) saturate(110%);
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.6);
            text-align: center;
            position: relative;
        }

        .av-test-section::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #6a82fb, #fc5c7d, #ff6b35, #6a82fb);
            background-size: 300% 100%;
            animation: shimmer 3s ease infinite;
            border-radius: 20px 20px 0 0;
        }

        .tabs-container {
            background: rgba(5, 6, 10, 0.72);
            border: 1px solid rgba(255, 255, 255, 0.22);
            border-radius: 24px;
            padding: 2rem;
            margin: 2rem 0;
            backdrop-filter: blur(18px) saturate(110%);
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.6);
            position: relative;
        }

        .tabs-container::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 4px;
            background: linear-gradient(90deg, #6a82fb, #fc5c7d, #ff6b35, #6a82fb);
            background-size: 300% 100%;
            animation: shimmer 3s ease infinite;
            border-radius: 24px 24px 0 0;
        }

        .tab-buttons {
            display: flex;
            gap: 1rem;
            justify-content: center;
            margin-bottom: 2rem;
            flex-wrap: wrap;
        }

        .tab-btn {
            background: rgba(255, 255, 255, 0.1);
            border: 1px solid rgba(255, 255, 255, 0.2);
            border-radius: 50px;
            padding: 1rem 2rem;
            color: white;
            font-weight: 600;
            cursor: pointer;
            transition: all 0.3s ease;
            backdrop-filter: blur(10px);
            font-size: 1rem;
        }

        .tab-btn.active {
            background: linear-gradient(135deg, #6a82fb 0%, #fc5c7d 100%);
            border-color: rgba(106, 130, 251, 0.5);
            box-shadow: 0 8px 25px rgba(106, 130, 251, 0.3);
            transform: translateY(-2px);
        }

        .tab-btn:hover:not(.active) {
            background: rgba(255, 255, 255, 0.2);
            transform: translateY(-2px);
        }

        .class-cards-grid {
            display: grid;
            grid-template-columns: repeat(auto-fit, minmax(320px, 1fr));
            gap: 2rem;
            margin-top: 2rem;
        }

        .class-card {
            background: rgba(5, 6, 10, 0.72);
            border: 1px solid rgba(255, 255, 255, 0.22);
            border-radius: 20px;
            padding: 2rem;
            backdrop-filter: blur(18px) saturate(110%);
            box-shadow: 0 12px 48px rgba(0, 0, 0, 0.6);
            transition: all 0.3s ease;
            position: relative;
            overflow: hidden;
        }

        .class-card::before {
            content: '';
            position: absolute;
            top: 0;
            left: 0;
            right: 0;
            height: 3px;
            background: linear-gradient(90deg, #6a82fb, #fc5c7d);
            transform: scaleX(0);
            transition: transform 0.3s ease;
        }

        .class-card:hover {
            transform: translateY(-8px);
            box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);
            border-color: rgba(106, 130, 251, 0.4);
        }

        .class-card:hover::before {
            transform: scaleX(1);
        }

        .class-card h3 {
            font-size: 1.4rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #6a82fb 0%, #fc5c7d 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        .class-info {
            color: rgba(255, 255, 255, 0.8);
            margin-bottom: 1rem;
            line-height: 1.6;
        }

        .class-code {
            font-size: 1.1rem;
            font-weight: 600;
            color: white;
            margin-bottom: 1rem;
            padding: 0.5rem 1rem;
            background: rgba(255, 255, 255, 0.1);
            border-radius: 10px;
            display: inline-block;
        }

        .empty-state {
            text-align: center;
            padding: 4rem 2rem;
            color: rgba(255, 255, 255, 0.8);
        }

        .empty-state-icon {
            font-size: 4rem;
            margin-bottom: 1.5rem;
            animation: bounce 2s ease-in-out infinite;
        }

        .empty-state h3 {
            font-size: 1.8rem;
            font-weight: 700;
            margin-bottom: 1rem;
            background: linear-gradient(135deg, #6a82fb 0%, #fc5c7d 100%);
            -webkit-background-clip: text;
            -webkit-text-fill-color: transparent;
            background-clip: text;
        }

        @keyframes logoFloat {
            0%, 100% { transform: translateY(0px); }
            50% { transform: translateY(-10px); }
        }

        @keyframes bounce {
            0%, 20%, 50%, 80%, 100% { transform: translateY(0); }
            40% { transform: translateY(-10px); }
            60% { transform: translateY(-5px); }
        }

        @keyframes shimmer {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @keyframes gradientShift {
            0%, 100% { background-position: 0% 50%; }
            50% { background-position: 100% 50%; }
        }

        @media (max-width: 768px) {
            .online-class-hero {
                padding: 6rem 0 3rem 0;
            }
            
            .online-class-logo {
                width: 80px;
                height: 80px;
                font-size: 2rem;
            }
            
            .tab-buttons {
                flex-direction: column;
                align-items: center;
            }
            
            .tab-btn {
                width: 100%;
                max-width: 300px;
            }
            
            .class-cards-grid {
                grid-template-columns: 1fr;
                gap: 1.5rem;
            }
        }
    </style>
  </head>
  <body class="online-class-page">
    <!-- Enhanced Floating Particles Background -->
    <div class="floating-particles">
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
        <div class="particle"></div>
    </div>

    <!-- Modern Floating Navbar -->
    <nav class="navbar-modern">
        <div class="navbar-container">
            <div class="navbar-brand">
                <a href="/" class="brand-link">
                    <span class="brand-icon">üåÖ</span>
                    <span class="brand-text">Sunrise</span>
                </a>
            </div>
            
            <button class="navbar-toggle" id="navbarToggle">
                <span class="toggle-bar"></span>
                <span class="toggle-bar"></span>
                <span class="toggle-bar"></span>
            </button>
            
            <div class="navbar-menu" id="navbarMenu">
                <div class="navbar-nav">
                    <a href="/" class="nav-link">üè† Home</a>
                    <a href="/online-class" class="nav-link active">üìπ Live Classes</a>
                    <a href="/batch" class="nav-link">üë• Batches</a>
                    <a href="/study-resources" class="nav-link">üìö Resources</a>
                    <a href="/forum" class="nav-link">üí¨ Forum</a>
                    <a href="/admission" class="nav-link">üìù Admission</a>
                </div>
                
                <div class="navbar-actions">
                    {% if username %}
                    <div class="user-menu">
                        <button class="user-button" id="userMenuToggle">
                            <span class="user-avatar">{{ username[0]|upper }}</span>
                            <span class="user-name">{{ username }}</span>
                            <span class="user-arrow">‚ñæ</span>
                        </button>
                        <div class="user-dropdown" id="userDropdown">
                            <a href="/profile" class="dropdown-link">üë§ Profile</a>
                            <a href="/notifications" class="dropdown-link">üîî Notifications</a>
                            <a href="/logout" class="dropdown-link">üö™ Logout</a>
                        </div>
                    </div>
                    {% else %}
                    <a href="/auth" class="btn-modern btn-primary-modern">Login</a>
                    {% endif %}
                    
                    <button class="btn-modern btn-glass" onclick="openSearch()" title="Search">üîç</button>
                    <!-- Theme toggle removed; use footer slider -->
                </div>
            </div>
        </div>
    </nav>

    <!-- Main Online Class Container -->
    <div class="online-class-container">
        
        <!-- Hero Section -->
        <section class="online-class-hero">
            <div class="online-class-hero-content">
                <div class="online-class-logo">üìπ</div>
                <h1 class="online-class-title">Live Classes</h1>
                <p class="online-class-subtitle">Experience interactive, real-time mathematics coaching from anywhere in the world</p>
                
                <!-- Audio/Video Test Section -->
                <div class="av-test-section">
                    <h3 style="margin-bottom: 1rem; color: white;">üé• Audio/Video Test</h3>
                    <p style="margin-bottom: 1.5rem; color: rgba(255,255,255,0.8);">Test your camera and microphone before joining a class</p>
                    <button id="previewAVBtn" class="btn-modern btn-primary-modern">
                        <span style="margin-right: 0.5rem;">üîß</span>
                        Test Audio/Video
                    </button>
                </div>
            </div>
        </section>

        <!-- Main Content -->
        <main class="online-class-main">
      <div id="avPreviewDialog" style="display:none; position:fixed; top:0; left:0; width:100vw; height:100vh; background:rgba(0,0,0,0.35); z-index:9999; align-items:center; justify-content:center;">
        <div style="background:#fff; border-radius:16px; padding:2rem; max-width:420px; margin:auto; box-shadow:0 8px 32px rgba(0,0,0,0.18); display:flex; flex-direction:column; align-items:center;">
          <h3 style="margin-bottom:1rem; color:#6a82fb;">Audio/Video Preview</h3>
          <div style="margin-bottom:1rem;">
            <label for="videoSelect" style="display:block; margin-bottom:0.5rem; font-weight:500;">Camera:</label>
            <select id="videoSelect" style="width:100%; padding:0.5rem; border:1px solid #ddd; border-radius:6px; margin-bottom:1rem;"></select>
            <label for="audioSelect" style="display:block; margin-bottom:0.5rem; font-weight:500;">Microphone:</label>
            <select id="audioSelect" style="width:100%; padding:0.5rem; border:1px solid #ddd; border-radius:6px; margin-bottom:1rem;"></select>
            <label for="speakerSelect" style="display:block; margin-bottom:0.5rem; font-weight:500;">Speaker:</label>
            <select id="speakerSelect" style="width:100%; padding:0.5rem; border:1px solid #ddd; border-radius:6px; margin-bottom:1rem;"></select>
          </div>
          <video id="previewVideo" width="320" height="240" autoplay muted playsinline style="background:#000; border-radius:10px; margin-bottom:1rem;"></video>
          <div style="margin-bottom:1rem;">
            <button id="testCameraBtn" class="btn btn-primary" style="margin-right:1rem;" onclick="testCameraAndMic()">Test Camera & Mic</button>
            <button id="stopTestBtn" class="btn btn-secondary" onclick="stopTest()">Stop Test</button>
          </div>
          <div id="testStatus" style="margin-bottom:1rem; font-weight:500; color:#666;"></div>
          <div style="margin-bottom:1rem;">
            <button id="testMicBtn" class="btn btn-secondary" style="margin-right:1rem;">Test Microphone</button>
            <span id="micLevel" style="display:inline-block; width:80px; height:10px; background:#eee; border-radius:5px; vertical-align:middle;"></span>
          </div>
          <div style="margin-bottom:1rem;">
            <button id="testSpeakerBtn" class="btn btn-secondary">Test Speaker</button>
            <audio id="testAudio" style="display:none;">
              <source src="data:audio/wav;base64,UklGRnoGAABXQVZFZm10IBAAAAABAAEAQB8AAEAfAAABAAgAZGF0YQoGAACBhYqFbF1fdJivrJBhNjVgodDbq2EcBj+a2/LDciUFLIHO8tiJNwgZaLvt559NEAxQp+PwtmMcBjiR1/LMeSwFJHfH8N2QQAoUXrTp66hVFApGn+DyvmwhBSuBzvLZiTYIG2m98OScTgwOUarm7blmGgU7k9n1unEiBC13yO/eizEIHWq+8+OWT" type="audio/wav">
            </audio>
          </div>
          <button id="closeAVDialog" class="btn btn-primary" style="margin-top:0.5rem;">Close</button>
        </div>
      </div>
            <!-- Tabs Container -->
            <section class="tabs-container">
                <div class="tab-buttons">
                    <button class="tab-btn active" onclick="showLiveTab('live')" id="live-tab-btn">
                        <span style="margin-right: 0.5rem;">üî¥</span>
                        Live Classes
                    </button>
                    <button class="tab-btn" onclick="showLiveTab('upcoming')" id="upcoming-tab-btn">
                        <span style="margin-right: 0.5rem;">‚è∞</span>
                        Upcoming
                    </button>
                    <button class="tab-btn" onclick="showLiveTab('schedule')" id="schedule-tab-btn">
                        <span style="margin-right: 0.5rem;">‚úÖ</span>
                        Completed
                    </button>
                </div>

                <!-- Live Classes Tab -->
                <div id="live-tab-content" class="tab-content" style="display:block;">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; background: linear-gradient(135deg, #6a82fb 0%, #fc5c7d 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">üî¥ Live Classes</h2>
                        <p style="color: rgba(255,255,255,0.8); font-size: 1.1rem;">Join ongoing live classes here</p>
                    </div>
                    
                    {% if active_classes and active_classes|length > 0 %}
                        <div class="class-cards-grid">
                            {% for c in active_classes %}
                                <div class="class-card">
                                    <h3>{{ c[4] or 'Live Class' }}</h3>
                                    
                                    {% if c|length > 12 %}
                                    <div class="class-info">
                                        {% set subj = c[13] %}
                                        {% if subj %}<strong>üìö Subject:</strong> {{ subj|capitalize }}<br>{% endif %}
                                        {% if c[14] %}<strong>üë®‚Äçüè´ Teacher:</strong> {{ c[14] }}<br>{% endif %}
                                        {% if c[9] %}<strong>üéØ Target:</strong> Class {{ c[9] }}{% if c[9] in ['11','12'] and c[10] %} ({{ c[10]|capitalize }}){% endif %}{% endif %}
                                    </div>
                                    {% endif %}
                                    
                                    <div class="class-code">
                                        <strong>üîë Class Code:</strong> {{ c[1] }}
                                    </div>
                                    
                                    {% if c[5] %}
                                    <div class="class-info">{{ c[5] }}</div>
                                    {% endif %}
                                    
                                    <a href="/join-class/{{ c[0] }}" class="btn-modern btn-primary-modern" style="width: 100%; margin-top: 1rem;">
                                        <span style="margin-right: 0.5rem;">üöÄ</span>
                                        Join Class
                                    </a>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="empty-state">
                            <div class="empty-state-icon">üìπ</div>
                            <h3>No Live Classes</h3>
                            <p>No live classes are currently active. Check back later or view upcoming classes.</p>
                        </div>
                    {% endif %}
                </div>

                <!-- Upcoming Classes Tab -->
                <div id="upcoming-tab-content" class="tab-content" style="display:none;">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; background: linear-gradient(135deg, #ffa726 0%, #ff6b35 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">‚è∞ Upcoming Classes</h2>
                        <p style="color: rgba(255,255,255,0.8); font-size: 1.1rem;">See which classes are scheduled to go live soon</p>
                    </div>
                    
                    {% if upcoming_classes and upcoming_classes|length > 0 %}
                        <div class="class-cards-grid">
                            {% for c in upcoming_classes %}
                                <div class="class-card">
                                    <h3 style="background: linear-gradient(135deg, #ffa726 0%, #ff6b35 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">{{ c[4] or 'Upcoming Class' }}</h3>
                                    
                                    {% if c|length > 12 %}
                                    <div class="class-info">
                                        {% set subj = c[13] %}
                                        {% if subj %}<strong>üìö Subject:</strong> {{ subj|capitalize }}<br>{% endif %}
                                        {% if c[14] %}<strong>üë®‚Äçüè´ Teacher:</strong> {{ c[14] }}<br>{% endif %}
                                        {% if c[9] %}<strong>üéØ Target:</strong> Class {{ c[9] }}{% if c[9] in ['11','12'] and c[10] %} ({{ c[10]|capitalize }}){% endif %}{% endif %}
                                    </div>
                                    {% endif %}
                                    
                                    <div class="class-code">
                                        <strong>üîë Class Code:</strong> {{ c[1] }}
                                    </div>
                                    
                                    {% if c[5] %}
                                    <div class="class-info">{{ c[5] }}</div>
                                    {% endif %}
                                    
                                    {% if c[8] %}
                                    <div class="class-info"><strong>üìÖ Scheduled:</strong> {{ c[8] }}</div>
                                    {% endif %}
                                    
                                    <button class="btn-modern btn-glass" style="width: 100%; margin-top: 1rem; cursor: not-allowed; opacity: 0.6;" disabled>
                                        <span style="margin-right: 0.5rem;">‚è≥</span>
                                        Pending
                                    </button>
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="empty-state">
                            <div class="empty-state-icon">‚è∞</div>
                            <h3>No Upcoming Classes</h3>
                            <p>No upcoming classes scheduled. New classes will appear here when scheduled.</p>
                        </div>
                    {% endif %}
                </div>

                <!-- Completed Classes Tab -->
                <div id="schedule-tab-content" class="tab-content" style="display:none;">
                    <div style="text-align: center; margin-bottom: 2rem;">
                        <h2 style="font-size: 2rem; font-weight: 700; margin-bottom: 0.5rem; background: linear-gradient(135deg, #9e9e9e 0%, #757575 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">‚úÖ Completed Classes</h2>
                        <p style="color: rgba(255,255,255,0.8); font-size: 1.1rem;">View the full schedule of all completed classes</p>
                    </div>
                    
                    {% if completed_classes and completed_classes|length > 0 %}
                        <div class="class-cards-grid">
                            {% for c in completed_classes %}
                                <div class="class-card">
                                    <h3 style="background: linear-gradient(135deg, #9e9e9e 0%, #757575 100%); -webkit-background-clip: text; -webkit-text-fill-color: transparent; background-clip: text;">{{ c[4] or 'Completed Class' }}</h3>
                                    
                                    {% if c|length > 12 %}
                                    <div class="class-info">
                                        {% set subj = c[13] %}
                                        {% if subj %}<strong>üìö Subject:</strong> {{ subj|capitalize }}<br>{% endif %}
                                        {% if c[14] %}<strong>üë®‚Äçüè´ Teacher:</strong> {{ c[14] }}<br>{% endif %}
                                        {% if c[9] %}<strong>üéØ Target:</strong> Class {{ c[9] }}{% if c[9] in ['11','12'] and c[10] %} ({{ c[10]|capitalize }}){% endif %}{% endif %}
                                    </div>
                                    {% endif %}
                                    
                                    <div class="class-code">
                                        <strong>üîë Class Code:</strong> {{ c[1] }}
                                    </div>
                                    
                                    {% if c[5] %}
                                    <div class="class-info">{{ c[5] }}</div>
                                    {% endif %}
                                    
                                    {% if c[8] %}
                                    <div class="class-info"><strong>üìÖ Completed:</strong> {{ c[8] }}</div>
                                    {% endif %}
                                    
                                    {% if c[3] %}
                                        <a href="{{ c[3] }}" class="btn-modern btn-primary-modern" style="width: 100%; margin-top: 1rem;" target="_blank">
                                            <span style="margin-right: 0.5rem;">üìπ</span>
                                            View Recording
                                        </a>
                                    {% else %}
                                        <button class="btn-modern btn-glass" style="width: 100%; margin-top: 1rem; cursor: not-allowed; opacity: 0.6;" disabled>
                                            <span style="margin-right: 0.5rem;">‚ùå</span>
                                            No Recording
                                        </button>
                                    {% endif %}
                                </div>
                            {% endfor %}
                        </div>
                    {% else %}
                        <div class="empty-state">
                            <div class="empty-state-icon">üìö</div>
                            <h3>No Completed Classes</h3>
                            <p>No completed classes yet. Completed classes will appear here after they end.</p>
                        </div>
                    {% endif %}
                </div>
            </section>
        </main>
    </div>

    <!-- Enhanced Footer -->
    <footer class="footer-modern">
        <div class="container">
            <div class="footer-content-modern">
                <div class="footer-section">
                    <h3>Live Classes</h3>
                    <p>Experience interactive, real-time mathematics coaching from anywhere in the world.</p>
                    <div class="uiverse-social-container">
                        <a href="https://www.instagram.com/sunrise_education_centre?igsh=OGc5enlsanE0eWJ2" target="_blank" class="uiverse-social-btn instagram" title="Instagram">
                            <img src="footer/instagram-brands-solid-full.svg" alt="Instagram" style="width: 24px; height: 24px; display: inline-block; vertical-align: middle;">
                        </a>
                        <a href="https://www.youtube.com/@MohitNariyani" target="_blank" class="uiverse-social-btn youtube" title="YouTube">
                            <img src="footer/youtube-brands-solid-full.svg" alt="YouTube" style="width: 24px; height: 24px; display: inline-block; vertical-align: middle;">
                        </a>
                        <a href="https://wa.me/917224860881" target="_blank" class="uiverse-social-btn whatsapp" title="WhatsApp">
                            <img src="footer/whatsapp-brands-solid-full.svg" alt="WhatsApp" style="width: 24px; height: 24px; display: inline-block; vertical-align: middle;">
                        </a>
                        <a href="/" class="uiverse-social-btn" title="Home">
                            <i class="fas fa-home"></i>
                        </a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Quick Links</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                        <a href="/">Home</a>
                        <a href="/study-resources">Study Resources</a>
                        <a href="/forum">Forum</a>
                        <a href="/admission">Admission</a>
                    </div>
                </div>
                
                <div class="footer-section">
                    <h3>Class Features</h3>
                    <div style="display: flex; flex-direction: column; gap: 0.5rem;">
                        <span>üìπ HD Video Quality</span>
                        <span>üé§ Crystal Clear Audio</span>
                        <span>üìù Interactive Whiteboard</span>
                        <span>üí¨ Live Chat</span>
                    </div>
                </div>
            </div>
            
            <div class="footer-bottom">
                <div>&copy; 2024 Sunrise Educational Centre. All rights reserved.</div>
            </div>
        </div>
    </footer>
    <script>
      function showLiveTab(tab) {
        // Hide all tab contents
        document.getElementById('live-tab-content').style.display = 'none';
        document.getElementById('upcoming-tab-content').style.display = 'none';
        document.getElementById('schedule-tab-content').style.display = 'none';
        
        // Remove active class from all buttons
        document.querySelectorAll('.tab-btn').forEach(btn => btn.classList.remove('active'));
        
        // Show selected tab content and activate button
        if (tab === 'live') {
            document.getElementById('live-tab-content').style.display = 'block';
            document.getElementById('live-tab-btn').classList.add('active');
        } else if (tab === 'upcoming') {
            document.getElementById('upcoming-tab-content').style.display = 'block';
            document.getElementById('upcoming-tab-btn').classList.add('active');
        } else if (tab === 'schedule') {
            document.getElementById('schedule-tab-content').style.display = 'block';
            document.getElementById('schedule-tab-btn').classList.add('active');
        }
        
        // Refresh class status when tab is changed
        refreshClassStatus();
      }

      // Auto-refresh class status every 30 seconds
      function refreshClassStatus() {
        fetch('/api/live-classes/status')
          .then(response => response.json())
          .then(data => {
            if (data.success) {
              // Check if page needs to be refreshed due to status changes
              const hasActiveClasses = data.active && data.active.length > 0;
              const hasUpcomingClasses = data.upcoming && data.upcoming.length > 0;
              const hasCompletedClasses = data.completed && data.completed.length > 0;
              
              // If significant changes detected, refresh the page
              if (shouldRefreshPage(hasActiveClasses, hasUpcomingClasses, hasCompletedClasses)) {
                console.log('Class status changed, refreshing page...');
                window.location.reload();
              }
            }
          })
          .catch(error => {
            console.log('Status check failed:', error);
          });
      }

      // Check if page should be refreshed based on status changes
      function shouldRefreshPage(hasActive, hasUpcoming, hasCompleted) {
        const currentActiveClasses = document.querySelectorAll('#live-tab-content .card-section').length;
        const currentUpcomingClasses = document.querySelectorAll('#upcoming-tab-content .card-section').length;
        const currentCompletedClasses = document.querySelectorAll('#schedule-tab-content .card-section').length;
        
        // Refresh if active classes count changed significantly
        return (hasActive && currentActiveClasses === 0) || (!hasActive && currentActiveClasses > 0);
      }

      // Start auto-refresh when page loads
      setInterval(refreshClassStatus, 30000); // 30 seconds

      const notifBell = document.getElementById('notifBell');
      const notifDropdown = document.getElementById('notifDropdown');
      if (notifBell && notifDropdown) {
        // Handled globally in script.js. Keep only page-specific logic below.
      }

      // Audio/Video Preview Dialog
      const previewBtn = document.getElementById('previewAVBtn');
      const avDialog = document.getElementById('avPreviewDialog');
      const closeAVDialog = document.getElementById('closeAVDialog');
      const previewVideo = document.getElementById('previewVideo');
      const testMicBtn = document.getElementById('testMicBtn');
      const micLevel = document.getElementById('micLevel');
      const testSpeakerBtn = document.getElementById('testSpeakerBtn');
      const testAudio = document.getElementById('testAudio');
      const videoSelect = document.getElementById('videoSelect');
      const audioSelect = document.getElementById('audioSelect');
      const speakerSelect = document.getElementById('speakerSelect');
      let avStream = null;
      let audioContext = null;
      let analyser = null;
      let micSource = null;
      let animationId = null;

      // Load available devices
      async function loadDevices() {
        try {
          const devices = await navigator.mediaDevices.enumerateDevices();
          videoSelect.innerHTML = '';
          audioSelect.innerHTML = '';
          speakerSelect.innerHTML = '';
          
          devices.forEach(device => {
            const option = document.createElement('option');
            option.value = device.deviceId;
            option.text = device.label || `${device.kind} ${device.deviceId.slice(0, 8)}`;
            
            if (device.kind === 'videoinput') {
              videoSelect.appendChild(option);
            } else if (device.kind === 'audioinput') {
              audioSelect.appendChild(option);
            }
          });
          
          // For speakers, we'll use a simple test
          const speakerOption = document.createElement('option');
          speakerOption.value = 'default';
          speakerOption.text = 'Default Speaker';
          speakerSelect.appendChild(speakerOption);
        } catch (err) {
          console.error('Error loading devices:', err);
        }
      }

      previewBtn.onclick = async function() {
        avDialog.style.display = 'flex';
        await loadDevices();
        
        try {
          const constraints = {
            video: { deviceId: videoSelect.value ? { exact: videoSelect.value } : undefined },
            audio: { deviceId: audioSelect.value ? { exact: audioSelect.value } : undefined }
          };
          
          avStream = await navigator.mediaDevices.getUserMedia(constraints);
          previewVideo.srcObject = avStream;
        } catch (err) {
          console.error('Error accessing media devices:', err);
          alert('Could not access camera/microphone. Please check permissions and try again.');
        }
      };

      closeAVDialog.onclick = function() {
        avDialog.style.display = 'none';
        if (avStream) {
          avStream.getTracks().forEach(track => track.stop());
          avStream = null;
        }
        if (audioContext) {
          audioContext.close();
          audioContext = null;
        }
        if (animationId) {
          cancelAnimationFrame(animationId);
          animationId = null;
        }
        micLevel.style.background = '#eee';
      };

      testMicBtn.onclick = function() {
        if (!avStream) return;
        if (audioContext) {
          audioContext.close();
          audioContext = null;
          micLevel.style.background = '#eee';
          return;
        }
        audioContext = new (window.AudioContext || window.webkitAudioContext)();
        micSource = audioContext.createMediaStreamSource(avStream);
        analyser = audioContext.createAnalyser();
        micSource.connect(analyser);
        analyser.fftSize = 256;
        const dataArray = new Uint8Array(analyser.frequencyBinCount);
        function draw() {
          analyser.getByteTimeDomainData(dataArray);
          let sum = 0;
          for (let i = 0; i < dataArray.length; i++) {
            sum += Math.abs(dataArray[i] - 128);
          }
          let avg = sum / dataArray.length;
          let percent = Math.min(1, avg / 30);
          micLevel.style.background = `linear-gradient(90deg, #6a82fb ${percent*100}%, #eee ${percent*100}%)`;
          animationId = requestAnimationFrame(draw);
        }
        draw();
      };

      testSpeakerBtn.onclick = function() {
        testAudio.currentTime = 0;
        testAudio.play().catch(err => {
          console.error('Error playing test audio:', err);
          alert('Could not play test audio. Please check your speaker settings.');
        });
      };

      // Handle device changes
      videoSelect.onchange = audioSelect.onchange = async function() {
        if (avStream) {
          avStream.getTracks().forEach(track => track.stop());
        }
        
        try {
          const constraints = {
            video: { deviceId: videoSelect.value ? { exact: videoSelect.value } : undefined },
            audio: { deviceId: audioSelect.value ? { exact: audioSelect.value } : undefined }
          };
          
          avStream = await navigator.mediaDevices.getUserMedia(constraints);
          previewVideo.srcObject = avStream;
        } catch (err) {
          console.error('Error switching devices:', err);
          alert('Could not switch to selected device. Please try again.');
        }
      };

      // Test camera and microphone
      async function testCameraAndMic() {
        const testVideo = document.getElementById('testVideo');
        const micLevel = document.getElementById('micLevel');
        const testStatus = document.getElementById('testStatus');
        
        testStatus.textContent = 'Testing camera and microphone...';
        
        try {
          // Check browser support
          if (!navigator.mediaDevices || !navigator.mediaDevices.getUserMedia) {
            testStatus.textContent = '‚ùå Camera/microphone not supported in this browser';
            return;
          }
          
          // Get user media
          const stream = await navigator.mediaDevices.getUserMedia({ 
            video: true, 
            audio: true 
          });
          
          // Show video preview
          testVideo.srcObject = stream;
          testVideo.style.display = 'block';
          
          // Test microphone level
          const audioContext = new AudioContext();
          const source = audioContext.createMediaStreamSource(stream);
          const analyser = audioContext.createAnalyser();
          source.connect(analyser);
          
          const dataArray = new Uint8Array(analyser.frequencyBinCount);
          
          function updateMicLevel() {
            analyser.getByteFrequencyData(dataArray);
            const average = dataArray.reduce((a, b) => a + b) / dataArray.length;
            const level = Math.min(100, (average / 128) * 100);
            
            micLevel.style.width = level + '%';
            micLevel.style.backgroundColor = level > 50 ? '#10b981' : level > 20 ? '#f59e0b' : '#ef4444';
            
            if (stream.active) {
              requestAnimationFrame(updateMicLevel);
            }
          }
          
          updateMicLevel();
          
          testStatus.textContent = '‚úÖ Camera and microphone working!';
          testStatus.style.color = '#059669';
          
          // Store stream for cleanup
          window.testStream = stream;
          
        } catch (err) {
          console.error('Test error:', err);
          let errorMsg = 'Failed to access camera/microphone';
          
          if (err.name === 'NotAllowedError') {
            errorMsg = '‚ùå Permission denied. Please allow camera and microphone access.';
          } else if (err.name === 'NotFoundError') {
            errorMsg = '‚ùå No camera or microphone found.';
          } else if (err.name === 'NotReadableError') {
            errorMsg = '‚ùå Camera/microphone is already in use by another app.';
          } else {
            errorMsg = `‚ùå Error: ${err.message}`;
          }
          
          testStatus.textContent = errorMsg;
          testStatus.style.color = '#dc2626';
        }
      }
      
      // Stop test stream
      function stopTest() {
        if (window.testStream) {
          window.testStream.getTracks().forEach(track => track.stop());
          window.testStream = null;
        }
        const testVideo = document.getElementById('testVideo');
        testVideo.style.display = 'none';
        testVideo.srcObject = null;
      }
    </script>
    <style>
      /* Additional responsive styles */
      @media (max-width: 480px) {
        .online-class-container {
          padding: 0 1rem;
        }
        
        .av-test-section {
          padding: 1.5rem;
        }
        
        .tabs-container {
          padding: 1.5rem;
        }
        
        .class-card {
          padding: 1.5rem;
        };
      }
      body.dark-mode .live-class-cards .card-section::before {
        background: linear-gradient(135deg, rgba(106,130,251,0.5), rgba(252,92,125,0.35));
      }
      body.dark-mode .live-class-cards .card-section:hover {
        box-shadow: 0 18px 48px rgba(14, 18, 32, 0.7);
        border-color: rgba(106,130,251,0.65);
      }
      body.dark-mode .live-class-cards .card-section h3 {
        color: #6a82fb;
      }
      body.dark-mode .live-class-cards .card-section a.btn-primary {
        background: linear-gradient(135deg, #6a82fb 0%, #5a6fd8 100%);
        color: #fff;
      }
      body.dark-mode .live-class-cards .card-section a.btn-primary:hover {
        background: linear-gradient(135deg, #5a6fd8 0%, #6a82fb 100%);
      }
      body.dark-mode .live-class-cards .card-section strong,
      body.dark-mode .live-class-cards .card-section .class-code,
      body.dark-mode .live-class-cards .card-section .class-description {
        color: #e0e7ff;
      }
      
      /* Mobile Responsive Styles */
      @media (max-width: 768px) {
        .card-section {
          padding: 1rem;
          margin: 1rem 0;
        }
        
        .live-class-cards {
          flex-direction: column;
          align-items: center;
        }
        
        .live-class-cards .card-section {
          min-width: auto;
          max-width: 100%;
          width: 100%;
          margin: 0.5rem 0;
        }
        
        .tab-btn {
          padding: 0.6rem 1.2rem !important;
          font-size: 0.9rem !important;
          margin: 0 0.3rem;
        }
        
        .container {
          padding: 0 1rem;
        }
      }
      
      @media (max-width: 480px) {
        .card-section {
          padding: 0.8rem;
        }
        
        .live-class-cards .card-section {
          padding: 1rem;
        }
        
        .tab-btn {
          padding: 0.5rem 1rem !important;
          font-size: 0.8rem !important;
          margin: 0 0.2rem;
        }
        
        .container {
          padding: 0 0.5rem;
        }
        
        h2 {
          font-size: 1.5rem;
        }
        
        h3 {
          font-size: 1.2rem;
        }
      }
      
      @media (max-width: 320px) {
        .card-section {
          padding: 0.5rem;
        }
        
        .live-class-cards .card-section {
          padding: 0.8rem;
        }
        
        .tab-btn {
          padding: 0.4rem 0.8rem !important;
          font-size: 0.75rem !important;
          margin: 0 0.1rem;
        }
        
        .container {
          padding: 0 0.3rem;
        }
        
        h2 {
      }
    </style>

    <!-- Scripts -->
    <script>
        window.currentUsername = {{ username|tojson if username else 'null' }};
    </script>
    <script src="/attached_assets/theme.js"></script>
    <script src="modern-interactions.js"></script>
    <script src="modern-navbar.js"></script>
    
    <script>
      // Search functionality
      function openSearch() {
          const searchTerm = prompt("üîç Enter your search term:");
          if (searchTerm && searchTerm.trim()) {
              const classCards = document.querySelectorAll('.class-card');
              let found = false;
              
              classCards.forEach(card => {
                  const title = card.querySelector('h3').textContent.toLowerCase();
                  const info = card.querySelector('.class-info')?.textContent.toLowerCase() || '';
                  const searchLower = searchTerm.toLowerCase();
                  
                  if (title.includes(searchLower) || info.includes(searchLower)) {
                      card.style.display = 'block';
                      card.style.borderColor = '#6a82fb';
                      card.style.boxShadow = '0 0 20px rgba(106, 130, 251, 0.5)';
                      found = true;
                  } else {
                      card.style.display = 'none';
                  }
              });
              
              if (!found) {
                  alert('‚ùå No classes found matching your search term.');
              } else {
                  // Add a reset button
                  const resetBtn = document.createElement('button');
                  resetBtn.textContent = 'üîÑ Show All Classes';
                  resetBtn.className = 'btn-modern btn-glass';
                  resetBtn.style.position = 'fixed';
                  resetBtn.style.top = '2rem';
                  resetBtn.style.right = '2rem';
                  resetBtn.style.zIndex = '1000';
                  resetBtn.onclick = () => {
                      classCards.forEach(card => {
                          card.style.display = 'block';
                          card.style.borderColor = '';
                          card.style.boxShadow = '';
                      });
                      resetBtn.remove();
                  };
                  document.body.appendChild(resetBtn);
              }
          }
      }

      // Initialize page
      document.addEventListener('DOMContentLoaded', function() {
          console.log('Online Class page initialized');
          
          // Setup navbar toggle
          const navbarToggle = document.getElementById('navbarToggle');
          const navbarMenu = document.getElementById('navbarMenu');
          
          if (navbarToggle && navbarMenu) {
              navbarToggle.addEventListener('click', function() {
                  navbarMenu.classList.toggle('active');
                  navbarToggle.classList.toggle('active');
              });
          }
          
          // Setup user menu toggle
          const userMenuToggle = document.getElementById('userMenuToggle');
          const userDropdown = document.getElementById('userDropdown');
          
          if (userMenuToggle && userDropdown) {
              userMenuToggle.addEventListener('click', function(e) {
                  e.stopPropagation();
                  userDropdown.classList.toggle('active');
              });
              
              // Close dropdown when clicking outside
              document.addEventListener('click', function() {
                  userDropdown.classList.remove('active');
              });
          }
          
          // Auto-refresh every 30 seconds
          setInterval(refreshClassStatus, 30000);
      });
    </script>

    <!-- Modern Button Navbar (User Pages Only) -->
    {% if username and role not in ['admin', 'teacher'] %}
    <nav class="modern-navbar">
        <div class="button-container">
            <!-- Home Button -->
            <button class="button" data-tooltip="Home" onclick="navigateTo('/')">
                <svg class="icon" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 1024 1024" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                    <path d="M946.5 505L560.1 118.8l-25.9-25.9a31.5 31.5 0 0 0-44.4 0L77.5 505a63.9 63.9 0 0 0-18.8 46c.4 35.2 29.7 63.3 64.9 63.3h42.5V940h691.8V614.3h43.4c17.1 0 33.2-6.7 45.3-18.8a63.6 63.6 0 0 0 18.7-45.3c0-17-6.7-33.1-18.8-45.2zM568 868H456V664h112v204zm217.9-325.7V868H632V640c0-22.1-17.9-40-40-40H432c-22.1 0-40 17.9-40 40v228H238.1V542.3h-96l370-369.7 23.1 23.1L882 542.3h-96.1z"></path>
                </svg>
            </button>
            
            <!-- Search Button -->
            <button class="button" data-tooltip="Search" onclick="openSearch()">
                <svg class="icon" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" aria-hidden="true" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                    <path stroke-linecap="round" stroke-linejoin="round" d="M21 21l-6-6m2-5a7 7 0 11-14 0 7 7 0 0114 0z"></path>
                </svg>
            </button>
            
            <!-- Profile Button -->
            <button class="button" data-tooltip="Profile" onclick="navigateTo('/profile')">
                <svg class="icon" stroke="currentColor" fill="currentColor" stroke-width="0" viewBox="0 0 24 24" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                    <path d="M12 2.5a5.5 5.5 0 0 1 3.096 10.047 9.005 9.005 0 0 1 5.9 8.181.75.75 0 1 1-1.499.044 7.5 7.5 0 0 0-14.993 0 .75.75 0 0 1-1.5-.045 9.005 9.005 0 0 1 5.9-8.18A5.5 5.5 0 0 1 12 2.5ZM8 8a4 4 0 1 0 8 0 4 4 0 0 0-8 0Z"></path>
                </svg>
            </button>
            
            <!-- Resources Button -->
            <button class="button" data-tooltip="Resources" onclick="navigateTo('/study-resources')">
                <svg class="icon" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                    <path d="M2 3h6a4 4 0 0 1 4 4v14a3 3 0 0 0-3-3H2z"></path>
                    <path d="M22 3h-6a4 4 0 0 0-4 4v14a3 3 0 0 1 3-3h7z"></path>
                </svg>
            </button>
            
            <!-- Live Classes Button -->
            <button class="button active" data-tooltip="Live Classes" onclick="navigateTo('/online-class')">
                <svg class="icon" stroke="currentColor" fill="none" stroke-width="2" viewBox="0 0 24 24" stroke-linecap="round" stroke-linejoin="round" height="1em" width="1em" xmlns="http://www.w3.org/2000/svg">
                    <path d="M22 8.862a5.95 5.95 0 0 1-1.654 4.13c-2.441 2.531-4.809 5.17-7.34 7.608-.581.55-1.502.53-2.057-.045l-7.295-7.562c-2.205-2.286-2.205-5.976 0-8.261a5.58 5.58 0 0 1 8.08 0l.266.274.265-.274a5.612 5.612 0 0 1 8.08 0c1.18 1.25 1.826 2.87 1.655 4.13z"></path>
                </svg>
            </button>
        </div>
    </nav>
    {% endif %}
  
    <!-- Search Modal -->
    <div id="searchModal" class="modal" style="display: none; position: fixed; z-index: 10000; left: 0; top: 0; width: 100%; height: 100%; background-color: rgba(0,0,0,0.5);">
        <div class="modal-content black-glass" style="margin: 10% auto; padding: 2rem; border-radius: 20px; width: 90%; max-width: 600px;">
            <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1.5rem;">
                <h2 style="color: white; margin: 0;">üîç Search</h2>
                <button onclick="closeSearch()" style="background: none; border: none; color: #fff; font-size: 1.5rem; cursor: pointer;">‚úï</button>
            </div>
            <input type="text" id="searchInput" placeholder="Search courses, resources, or topics..." style="width: 100%; padding: 15px; border: none; border-radius: 10px; background: rgba(255,255,255,0.1); color: white; font-size: 1rem; margin-bottom: 1rem;">
            <div id="searchResults" style="max-height: 300px; overflow-y: auto;"></div>
        </div>
    </div>

    <!-- Notification Panel -->
    <div id="notification-panel" class="notification-panel black-glass" style="display: none; position: fixed; top: 100px; right: 20px; width: 350px; max-height: 500px; overflow-y: auto; z-index: 999; border-radius: 16px; padding: 1rem; box-shadow: 0 20px 60px rgba(0, 0, 0, 0.8);">
        <div style="display: flex; justify-content: space-between; align-items: center; margin-bottom: 1rem; padding-bottom: 0.5rem; border-bottom: 1px solid rgba(255,255,255,0.2);">
            <h3 style="margin: 0; font-size: 1.2rem; color: white;">üîî Notifications</h3>
            <button onclick="toggleNotifications()" style="background: none; border: none; color: #fff; font-size: 1.2rem; cursor: pointer; padding: 0.2rem;">‚úï</button>
        </div>
        <div class="notification-list">
            <div class="notification-item" style="padding: 0.8rem; border-bottom: 1px solid rgba(255,255,255,0.1); margin-bottom: 0.5rem;">
                <div style="font-weight: 600; margin-bottom: 0.3rem; color: white;">üìö Latest Updates</div>
                <div style="font-size: 0.9rem; opacity: 0.8; color: rgba(255,255,255,0.8);">Check out new features and content</div>
            </div>
        </div>
    </div>

    <script src="navbar-functions.js"></script>
</body>
</html>
